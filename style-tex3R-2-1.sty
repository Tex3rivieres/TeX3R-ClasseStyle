\NeedsTeXFormat{LaTeX2e}[2022-11-01]
\ProvidesPackage{style-tex3R-2-1}

%%%%%%%%%%%%%%%%%%%%%%%%%
%%% FORMAT DE LA PAGE %%%
%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{luacode}
  function FormatUtilisateur (PARAMETRES)

    local FORMAT = PARAMETRES.format
    local HEADER = PARAMETRES.header

    local PAGE = {}
    local DOC = {}
    local DOC_HEADER = {}

    PAGE.enumi = '\\textbf{\\arabic*. }'
    PAGE.enumii = '\\textbf{\\alph*. }'
    PAGE.itemi = '\\textbullet'
    PAGE.itemii = '$\\circ$'

    PAGE.sectionname = '\\LARGE\\bfseries\\textcolor{couleursection}'
    PAGE.subsectionname = '\\Large\\bfseries\\textcolor{couleursubsection}'
    PAGE.subsubsectionname = '\\normalfont\\large\\bfseries\\textcolor{couleursubsubsection}'

    PAGE.sectionnumber = '\\colorbox{couleursection}{\\textcolor{white}{\\normalfont\\LARGE\\textbf{{\\Roman{section}}}}} '
    PAGE.subsectionnumber = '\\colorbox{couleursubsection}{\\textcolor{white}{\\normalfont\\Large\\textbf{{\\arabic{subsection}}}}} '
    PAGE.subsubsectionnumber = '\\colorbox{couleursubsubsection}{\\textcolor{white}{\\normalfont\\large\\textbf{{\\Alph{subsubsection}}}}} '

    if FORMAT == "fiche" then
      PAGE.width = '21cm'
      PAGE.height = '29.7cm'
      PAGE.parindent = '0pt'
      PAGE.parskip = '0pt'
      --Marges du format 'fiche' sans header
      DOC.top = '1cm'
      DOC.bottom = '1cm'
      DOC.right = '1cm'
      DOC.left = '1cm'
      DOC.marginparsep = '0cm'
      DOC.marginparwidth = '0cm'
      DOC.headheight = '0cm'
      DOC.headsep = '0cm'
      DOC.footskip = '0cm'
      --Marges du format 'fiche' avec header
      DOC_HEADER.top = '1cm'
      DOC_HEADER.bottom = '1cm'
      DOC_HEADER.right = '1cm'
      DOC_HEADER.left = '1cm'
      DOC_HEADER.marginparsep = '0cm'
      DOC_HEADER.marginparwidth = '0cm'
      DOC_HEADER.headheight = '1cm'
      DOC_HEADER.headsep = '0.5cm'
      DOC_HEADER.footskip = '0cm'
    elseif FORMAT == "diapo" then
      PAGE.width = '28.8cm'
      PAGE.height = '18cm'
      PAGE.parindent = '0pt'
      PAGE.parskip = '0pt'
      --Marges du format 'diapo' sans header
      DOC.top = '0.5cm'
      DOC.bottom = '3cm'
      DOC.right = '1cm'
      DOC.left = '1cm'
      DOC.marginparsep = '0cm'
      DOC.marginparwidth = '0cm'
      DOC.headheight = '0cm'
      DOC.headsep = '0cm'
      DOC.footskip = '0cm'
      --Marges du format 'diapo' avec header
      DOC_HEADER.top = '0.5cm'
      DOC_HEADER.bottom = '3cm'
      DOC_HEADER.right = '1cm'
      DOC_HEADER.left = '1cm'
      DOC_HEADER.marginparsep = '0cm'
      DOC_HEADER.marginparwidth = '0cm'
      DOC_HEADER.headheight = '2.5cm'
      DOC_HEADER.headsep = '0.5cm'
      DOC_HEADER.footskip = '0cm'
    end
    return PAGE,DOC,DOC_HEADER
  end
\end{luacode}

%%%%%%%%%%%%%%%%%%%%%%%%%
%%% FORMATAGES DIVERS %%%
%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{luacode}
  function PoliceUtilisateur()

    local POLICE = {}

    POLICE.taillefiche = '12pt'
    POLICE.taillediapo = '20pt'
    POLICE.texte = 'Calibri'
    POLICE.math = 'STIX Two Math'
    POLICE.mathcal = 'Libertinus Math Regular'

    return POLICE
  end
\end{luacode}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% DÉFINITION DES COULEURS %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{luacode}
  function CouleursUtilisateur(PARAMETRES)
    local PRINT = PARAMETRES.print
    local COULEURS = {}

    if PRINT then
      COULEURS.ligne = 'black'
      COULEURS.interligne = 'black!30'
      COULEURS.section = 'black'
      COULEURS.subsection = 'black!70'
      COULEURS.subsubsection = 'black!40'
    else
      COULEURS.ligne = 'SlateBlue'
      COULEURS.interligne = 'LightSteelBlue'
      COULEURS.section = 'black'
      COULEURS.subsection = 'Red'
      COULEURS.subsubsection = 'Green'
    end
    return COULEURS
  end 
\end{luacode}

%%%%%%%%%%%%%%%%%%%%%%%
%%% CHOIX DES LOGOS %%%
%%%%%%%%%%%%%%%%%%%%%%%

\begin{luacode}
  function LogosUtilisateur()

    local LOGOS = {}

    LOGOS.activite = '\\reflectbox{\\faPencil*}'
    LOGOS.basique = ''
    LOGOS.corrige = '\\faEdit[regular]'
    LOGOS.cours = '\\faBook'
    LOGOS.DM = '\\faHome'
    LOGOS.DS = '\\faFile*[regular]'
    LOGOS.flash = '\\faUserSecret'
    LOGOS.interro = '\\faFile*[regular]'
    LOGOS.TD = '\\faEdit[regular]'
    return LOGOS
  end
\end{luacode}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% REDÉFINITION DES TITRES %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% \renewcommand{\titreactivite}[2]{}
% \renewcommand{\titrebasique}[2]{}
% \renewcommand{\titrecours}[2]{}
% \renewcommand{\titrecorrige}[2]{}
% \renewcommand{\titreDM}[2]{}
% \renewcommand{\titreDS}[2]{}
% \renewcommand{\titreflash}[2]{}
% \renewcommand{\titreinterro}[2]{}
% \renewcommand{\titreTD}[2]{}










